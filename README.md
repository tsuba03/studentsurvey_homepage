## ページ構成
```
index.php　... トップページ
favicon.ico　... タブのアイコン
README.md　... このページ
|-news
    |-index.php ... ニュースページトップ
    |-view.php ... それぞれの記事を表示させる
    |-Parsedown.php　... Markdownから読み込み
    |-posts ... 記事の格納
    |-_img ... 記事の写真はここに格納
    |-parsedown
|-suggestion
    |-index.php ... 提言検索
    |-detail.php ... それぞれの提言閲覧
    |-style_pdf.css ... PDFのスタイルを整える（特にレスポンシブ対応）
|-assets
    |-db
        |-teigen.db ... 提言のデータ（ID・タイトル・分類[学修・施設・サービス・DE&I・統合・女子枠・その他]・種類[提言or意見まとめ]・分類番号・提言番号・ページ・大学からの回答ページ）
    |-img ... トップページの写真はここに格納
    |-css ... デザインシステムより
    |-font ... デザインシステムより
    |-js ... デザインシステムより
|-(admin)
```
## ニュース記事の投稿
- 基本的には、```news/posts```内にある適当なMDファイルをコピペして、中身を書き換えればOK。ファイル名は```YYYYMMDD_hoge.md```で統一。hogeの部分はタイトルを1単語で要約したわかりやすいものに。一応テンプレと、詳細について以下に説明。
```markdown:template
---
title: タイトル（20~30字程度が見やすいかと思う）
date: 2025-09-12　←YYYY-MM-DD方式で書く
auther: 2025/10時点では表示させていないので適当でOK
lead: 記事の一覧ページで表示されるリード文を書く。見栄え的にある程度書いていたほうが良いと思う。
---

本文
マークダウンの記法に従って書けばOK。「マークダウン　書き方」などで調べれば書き方はわかると思う。
参考サイト：https://qiita.com/kamorits/items/6f342da395ad57468ae3
写真はnews/_imgに入れて以下のように書けば表示できる。

![lenna](_img/Lenna.png)
```

## 編集の案内
全体を通しての編集方針と、編集したくなる場所であるトップページ、提言紹介ページ、データベースについて解説。
### 本HPの編集方針
デザインは、科学大公式のデザインシステムに基本的に丸投げしている。デザインコストが低いし、組み合わせるだけで何とかなるためである。以下のWebサイトにボタンや写真の配置などあらゆるデザインの例とコードが載っているのでそれをコピペしてほしいところに貼り付ければ基本的にはうまくデザインされたページができるはず（特別に何か欲しいものがあれば、デザイン方針に則って自分でCSSを組むことを推奨）。

https://design-system.isct.ac.jp/ja/website

フロントエンドは、2025/10時点ではHTMLとCSSで作成することにしているが、将来的にはVue.jsに移行することを考えている。

バックエンドは、大学サーバで動作保証があり、確実なPHPを利用している。動的に動かす部分は、ニュースと検索機能だけであり、PHPで十分だと考えているが、もし将来的にPHPだけでは耐えられないような状況になった場合には、大学のITデスクと相談するなどして適当なフレームワークに移行することになる。

大学サーバについての詳細(学内限定)：https://www.noc.cii.isct.ac.jp/srv/wwwsrv/

### トップページについて
基本的にHTMLしかつかっていないので、テキストの編集や画像の挿入などについては、その場所を編集するだけでOK。細かいどこに何が書いてあるのかについては、ページ内のコメントを参照すること。
<br>
ニュースの表示だけPHPで最新3件を取ってくるようにしている。

### 提言紹介ページ
```suggestion/index.php```検索フォーム、検索、検索結果の表示の3つのパートに分かれている。

検索フォームは、デザインシステムから取ってきたので、追加で検索機能を追加したい場合は、適当な検索オブジェクトを持ってくること。単純に年や種類を増やしたい場合は、同じ属性のものをコピペすればよい。

検索と結果の表示については、SQLiteを利用している。2025/10時点での実装では、年(Year)、カテゴリ(Category)、タイプ(Type)、タイトルの部分一致(Title LIKE)によって検索を行い、条件に合致したすべての提言のYear, Category, Type, Title, Page, IDを返答。Year, Category, Type, Titleを表示。詳細表示のために```detail.php```にIDを送るというような流れとなっている。

新しい検索機能をつけたい場合は、①データベースの拡張と②検索命令文の変更の2点が必要になる。

①については、以下のツールを利用することで簡単にデータベースを拡張できる。新しい提言を追加したい場合でも以下を使って追加可能。エクセルのコピペでもデータの追加が可能。詳しくは次の節で解説。

DB Browser(SQLite): https://sqlitebrowser.org/

②については、SQLiteの構文を調べて自分で作るなり、AIにきくなりすることで何とかなる。

```detail.php```では、IDによって提言を検索し、詳細情報を表で表示することと、該当のPDFページを埋め込み表示することを行っている。2025/10時点で、2022年以降とそれ以前の提言と大学の対応のPDF名が異なるため、場合分けが発生している。
```{$year}_gakusei_teigensho.pdf```vs```{$year}_gakusei_teigensyo.pdf```<br>
 ```gakuseichosa{$year}_daigakunotaio.pdf```vs```{$year}_gakusei_follow.pdf```<br>
 2022年追加調査は```gakuseichosa2022_houkokusyo_ver3.pdf```

### データベース
データベースの管理は、基本的に先ほど示したDB Browser(SQLite)によって完結する。データの追加削除、要素の追加削除、新しいDBの作成など簡単に実行可能。

DB Browser(SQLite): https://sqlitebrowser.org/

2025/10での```teigen.db```の要素は次の通り。
|Year|Category|Type|CategoryNo|TeigenNo|Title|Page|ResponsePage|ID|
|---|---|---|---|---|---|---|---|---|
|提言した年|学習・施設・サービス・DE&I・統合・女子枠・その他|提言・意見まとめ|提言書の章番号(提言についているXX-YYという番号のXXの方)|提言についているXX-YYという番号のYYの方|提言のタイトル|**提言書の目次**でのページ番号|**大学の対応の目次**でのページ番号|[Yearの下2桁][CategoryNoの2桁表示][TeigenNoの2桁表示][ページ番号の3桁表示]|


```Page```と```ResponsePage```は、目次番号かPDFのページ番号でそろえないとPDFのページ遷移がうまくいかないので、目次番号でそろえている。```Page```は+2、```ResponsePage```は+2することでPDFのページになる(2016年だけ+3, +1となるので注意)。

新しい提言を追加する際は、まずこの要素をエクセルなどに書き下し、DB　Browserを利用して```teigen.db```に追加すること。


## その他背景紹介
Parsedown　... https://github.com/erusev/parsedown.git

大学のサーバが正式に対応しているのがPHPなので、バックエンドはPHPによる処理。

---
デザイン　... https://design-system.isct.ac.jp/ja/website

科学大公式のデザインシステムは、完成度が非常に高い。使いたいパーツを切り貼りすればそれでOK。仮にデザインの更新が行われる場合は、assetsを変更する必要がある。
<br>現状、cssでurlを利用してアイコンを指定しているもののパスが(/assets/...)となっているので、これによって不具合が起こる場合がある(2025/10時点で修正できていない)。

---
データベース

SQLiteを利用。大学のサーバでMySQLなどでデータベース層を独立で動かせるかわからないので、Apacheのみで動くSQLiteを利用中。
<br>元データはSpreadSheetで管理（なぜならみんなで編集しやすいから）。エディタなどでデータを追加する必要がある。
<br>例：https://sqlitebrowser.org/

### 今後やりたいこと
- 各提言に概要を追加
    - 何なら全文データベースに格納して簡単に表示できるようにしたい
- 調査資料集をデータベース化
    - 経年変化を追いやすくしたい
    - Excelファイルとして出力を簡単にするなど

---
フロントエンド

自立支援HPに足並みをそろえて、vue.jsで管理（2025/10時点で未実装）

---
やりたい機能追加
- ニュースにタグを追加。検索機能をつける
- ニュースについては、遠隔でポストできるようにしたい
